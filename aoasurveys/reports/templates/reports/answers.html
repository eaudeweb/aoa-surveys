{% extends '_layout.html' %}

{% block scripts %}

  <script>
    $(function () {
        var dataTable = $('#answers_listing').dataTable();

        $('#searchbox').keyup(function() {
            dataTable.fnFilter(this.value);
        });
    });
  </script>

{% endblock %}

{% block content %}
  <h2>Answers</h2>

  <label>Search:
    <input id="searchbox" type="text">
  </label>

  <form action="" method="POST">{% csrf_token %}
      {{ form.as_p }}
      <input type="submit" value="Filter" />
  </form>

  <table id="answers_listing" class="table table-condensed table-bordered">
    <thead>
      <tr>
      {% for field in object.extra.visible_fields %}
        <th>{{ field.label }}</th>
      {% endfor %}
      </tr>
    </thead>
    {% for answer in object.answers %}
      <tr>
      {% for field in answer.visible_fields %}
        <td>
        {% if field.url %}
          <a href="{{ field.url }}">{{ field.value }}</a>
        {% else %}
          {{ field.value }}
        {% endif %}
        </td>
      {% endfor %}
      </tr>
    {% endfor %}
  </table>
{% endblock %}
